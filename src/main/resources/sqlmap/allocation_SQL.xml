<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace : xml파일은 여러개일 수 있음. 
이를 구별하기 위한 식별 용도로 사용 -->
<mapper namespace="kr.or.ddit.mapper.AllocationMapper">


	<select id="studentApplyTimeTable" parameterType="studentLecture" resultType="allocation">
		SELECT LA.LECA_NM
		     , B.BLD_SNM
		     , R.ROOM_NO
		     , A.ALT_DT
		     , A.ALT_ST
		     , A.ALT_EN
		FROM  ALLOCATION A, LECTURE L, LEC_APPLY LA, ROOM R, BUILDING B, STU_LEC SL
		WHERE A.LECA_CD = L.LECA_CD
		AND LA.LECA_CD = L.LECA_CD
		AND R.ROOM_CD = A.ROOM_CD
		AND R.BLD_CD = B.BLD_CD
		AND SL.LECA_CD = L.LECA_CD
		AND SL.STU_NO = #{stuNo}
	</select>
	
	<select id="studentSaveTimeTable" parameterType="studentLecture" resultType="allocation">
		SELECT LA.LECA_NM
		     , B.BLD_SNM
		     , R.ROOM_NO
		     , A.ALT_DT
		     , A.ALT_ST
		     , A.ALT_EN
		FROM  ALLOCATION A, LECTURE L, LEC_APPLY LA, ROOM R, BUILDING B, WISH W
		WHERE A.LECA_CD = L.LECA_CD
		AND LA.LECA_CD = L.LECA_CD
		AND R.ROOM_CD = A.ROOM_CD
		AND R.BLD_CD = B.BLD_CD
		AND W.LECA_CD = L.LECA_CD
		AND W.STU_NO = #{stuNo}
	</select>
	
	<select id="allocationByRoomList" parameterType="int" resultType="allocation">
		SELECT ROOM_CD
		     , LECA_CD
		     , ALT_DT
		     , ALT_ST
		     , ALT_EN
		FROM ALLOCATION
		WHERE ROOM_CD = ${roomNo}
	</select>
</mapper>

